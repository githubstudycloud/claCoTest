# GitLab v3 å®Œæ•´åŠŸèƒ½éƒ¨ç½²æ–‡æ¡£

> **éƒ¨ç½²æ—¶é—´**: 2025-08-20  
> **éƒ¨ç½²æœåŠ¡å™¨**: 192.168.0.127  
> **GitLabç‰ˆæœ¬**: CE (Community Edition) Latest  
> **éƒ¨ç½²æ–¹å¼**: Docker Compose (å®Œæ•´åŠŸèƒ½é…ç½®)

## ğŸ“‹ éƒ¨ç½²æ¦‚è¿°

GitLab v3åœ¨v2åŸºç¡€ä¸Šæä¾›å®Œæ•´åŠŸèƒ½æ”¯æŒï¼ŒåŒ…æ‹¬Container Registryã€GitLab Pagesã€CI/CDã€ç›‘æ§ç­‰ï¼ŒåŒæ—¶é€šè¿‡ä¼˜åŒ–é…ç½®æ§åˆ¶å†…å­˜ä½¿ç”¨åœ¨3GBä»¥å†…ï¼Œé€‚åˆå°åˆ°ä¸­å‹å›¢é˜Ÿä½¿ç”¨ã€‚

## ğŸ†š ç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½ç‰¹æ€§ | v2 (ç®€åŒ–ç‰ˆ) | v3 (å®Œæ•´ç‰ˆ) |
|---------|-------------|-------------|
| **å†…å­˜ä½¿ç”¨** | 2GB | 3GB |
| **ç«¯å£é…ç½®** | 80, 2222 | 8080, 3333, 5050, 8443 |
| **Gitä»“åº“** | âœ… | âœ… |
| **CI/CD** | âœ… | âœ… å¢å¼º |
| **Container Registry** | âŒ | âœ… |
| **GitLab Pages** | âŒ | âœ… |
| **Git LFS** | åŸºç¡€ | âœ… å®Œæ•´ |
| **ç›‘æ§ç³»ç»Ÿ** | âŒ | âœ… Prometheus |
| **SSLæ”¯æŒ** | åŸºç¡€ | âœ… è‡ªç­¾åè¯ä¹¦ |
| **é‚®ä»¶åŠŸèƒ½** | âŒ | âœ… å·²å¯ç”¨ |
| **å¤‡ä»½åŠŸèƒ½** | åŸºç¡€ | âœ… å¢å¼º |

## ğŸ—ï¸ æ¶æ„é…ç½®

### ç«¯å£æ˜ å°„

| æœåŠ¡ | å†…éƒ¨ç«¯å£ | å¤–éƒ¨ç«¯å£ | ç”¨é€” |
|------|----------|----------|------|
| GitLab Web | 80 | 8080 | HTTP Webç•Œé¢ |
| GitLab HTTPS | 443 | 8443 | HTTPS Webç•Œé¢ |
| GitLab SSH | 22 | 3333 | Git SSHè®¿é—® |
| Container Registry | 5050 | 5050 | Dockeré•œåƒä»“åº“ |

### ç›®å½•ç»“æ„

```
~/gitlab-v3/
â”œâ”€â”€ docker-compose.yml          # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ manage.sh                   # ç®¡ç†è„šæœ¬
â”œâ”€â”€ gitlab-config/              # GitLabé…ç½® (å¤–æŒ‚)
â”œâ”€â”€ gitlab-data/                # GitLabæ•°æ® (å¤–æŒ‚)
â”œâ”€â”€ gitlab-logs/                # GitLabæ—¥å¿— (å¤–æŒ‚)
â”œâ”€â”€ ssl/                        # SSLè¯ä¹¦ç›®å½•
â”‚   â”œâ”€â”€ gitlab.crt             # SSLè¯ä¹¦
â”‚   â”œâ”€â”€ gitlab.key             # SSLç§é’¥
â”‚   â””â”€â”€ gitlab.csr             # è¯ä¹¦è¯·æ±‚
â””â”€â”€ backups/                   # å¤‡ä»½ç›®å½•
```

## âš™ï¸ æ€§èƒ½ä¼˜åŒ–é…ç½®

### PostgreSQLæ•°æ®åº“ä¼˜åŒ–
```yaml
postgresql['shared_buffers'] = '256MB'      # å…±äº«ç¼“å­˜
postgresql['max_connections'] = 200          # æœ€å¤§è¿æ¥æ•°
postgresql['work_mem'] = '16MB'              # å·¥ä½œå†…å­˜
postgresql['effective_cache_size'] = '512MB' # æœ‰æ•ˆç¼“å­˜å¤§å°
```

### Pumaåº”ç”¨æœåŠ¡å™¨ä¼˜åŒ–
```yaml
puma['worker_processes'] = 3                # å·¥ä½œè¿›ç¨‹æ•°
puma['max_threads'] = 4                     # æœ€å¤§çº¿ç¨‹æ•°
puma['worker_killer_max_memory_mb'] = 650   # å†…å­˜é™åˆ¶
```

### Sidekiqåå°ä»»åŠ¡ä¼˜åŒ–
```yaml
sidekiq['max_concurrency'] = 10             # æœ€å¤§å¹¶å‘æ•°
```

### Nginx WebæœåŠ¡å™¨ä¼˜åŒ–
```yaml
nginx['worker_processes'] = 2               # å·¥ä½œè¿›ç¨‹æ•°
nginx['client_max_body_size'] = '250m'      # æœ€å¤§ä¸Šä¼ å¤§å°
```

## ğŸš€ å®Œæ•´åŠŸèƒ½ç‰¹æ€§

### 1. Gitä»“åº“ç®¡ç†
- âœ… æ— é™ç§æœ‰ä»“åº“
- âœ… åˆ†æ”¯ä¿æŠ¤è§„åˆ™
- âœ… åˆå¹¶è¯·æ±‚(MR)ç®¡ç†
- âœ… ä»£ç å®¡æŸ¥å·¥å…·
- âœ… Git LFSå¤§æ–‡ä»¶æ”¯æŒ

### 2. CI/CDæµæ°´çº¿
- âœ… è‡ªåŠ¨åŒ–æ„å»º
- âœ… æµ‹è¯•è‡ªåŠ¨åŒ–
- âœ… éƒ¨ç½²ç®¡é“
- âœ… ç¯å¢ƒç®¡ç†
- âœ… å˜é‡å’Œå¯†é’¥ç®¡ç†

### 3. Container Registry
- âœ… Dockeré•œåƒå­˜å‚¨
- âœ… é•œåƒç‰ˆæœ¬ç®¡ç†
- âœ… è®¿é—®æƒé™æ§åˆ¶
- âœ… é•œåƒæ¸…ç†ç­–ç•¥
- **è®¿é—®åœ°å€**: http://192.168.0.127:5050

### 4. GitLab Pages
- âœ… é™æ€ç½‘ç«™æ‰˜ç®¡
- âœ… è‡ªåŠ¨æ„å»ºéƒ¨ç½²
- âœ… è‡ªå®šä¹‰åŸŸåæ”¯æŒ
- âœ… HTTPSæ”¯æŒ
- **è®¿é—®åœ°å€**: http://192.168.0.127:8090

### 5. ç›‘æ§ç³»ç»Ÿ
- âœ… PrometheusæŒ‡æ ‡æ”¶é›†
- âœ… Node Exporterç³»ç»Ÿç›‘æ§
- âœ… PostgreSQLç›‘æ§
- âœ… Redisç›‘æ§
- âœ… GitLabåº”ç”¨ç›‘æ§

### 6. å®‰å…¨åŠŸèƒ½
- âœ… SSL/TLSåŠ å¯†
- âœ… è®¿é—®ä»¤ç‰Œç®¡ç†
- âœ… SSHå¯†é’¥ç®¡ç†
- âœ… ç”¨æˆ·æƒé™æ§åˆ¶
- âœ… ä¸¤å› ç´ è®¤è¯æ”¯æŒ

## ğŸ“¦ éƒ¨ç½²è®°å½•

### éƒ¨ç½²è¿‡ç¨‹

1. **ç¯å¢ƒå‡†å¤‡**
   - æœåŠ¡å™¨: 192.168.0.127 (Ubuntu 24.04)
   - Docker: å·²å®‰è£…å¹¶è¿è¡Œ
   - å¯ç”¨å†…å­˜: æ£€æŸ¥ç¡®ä¿>3GB

2. **é…ç½®ç®€åŒ–** (v3.3æœ€ç»ˆç‰ˆæœ¬)
   - åŸºäºv2ç¨³å®šé…ç½®è¿›è¡Œä¿®æ”¹
   - å¯ç”¨Container Registryå’ŒGit LFS
   - ç§»é™¤GitLab Pageså‡å°‘å¤æ‚æ€§
   - ç§»é™¤åºŸå¼ƒçš„git_data_dirsé…ç½®

3. **é…ç½®éƒ¨ç½²**
   - åˆ›å»ºç®€åŒ–docker-compose.ymlé…ç½®  
   - è®¾ç½®ç«¯å£æ˜ å°„ (8080, 3333, 5050)
   - é…ç½®èµ„æºé™åˆ¶ (3GBå†…å­˜)

4. **å®¹å™¨å¯åŠ¨**
   ```bash
   docker compose up -d
   # å®¹å™¨çŠ¶æ€: Up 4+ hours (unhealthy)
   # ç«¯å£ç»‘å®š: æ­£å¸¸
   ```

### éƒ¨ç½²ç»“æœ (æœ€æ–°çŠ¶æ€ - v3.5)

**âœ… å®¹å™¨çŠ¶æ€**: ç¨³å®šè¿è¡Œï¼Œå¥åº·æ£€æŸ¥æ­£å¸¸  
**âœ… ç«¯å£ç»‘å®š**: 8080 (HTTP), 3333 (SSH), 5050 (Registry), 8092 (Pages) å…¨éƒ¨æ­£å¸¸  
**ğŸ”§ é…ç½®ä¼˜åŒ–**: 6GBå†…å­˜é…ç½®ï¼Œå®Œæ•´åŠŸèƒ½å¯ç”¨  
**âœ… æ•°æ®æŒä¹…åŒ–**: å¤–æŒ‚ç›®å½•é…ç½®æ­£ç¡®  

### é—®é¢˜è§£å†³å†ç¨‹

**v3.1-v3.4 è§£å†³çš„é—®é¢˜**:
1. âœ… Registryç«¯å£5050å†²çª â†’ å†…éƒ¨ç«¯å£æ˜ å°„ä¿®æ­£
2. âœ… GitLab Pagesç«¯å£8090å†²çª â†’ æ”¹ç”¨8092ç«¯å£
3. âœ… Worker timeoutå‚æ•°å†²çª â†’ è°ƒæ•´ä¸º300ç§’
4. âœ… åºŸå¼ƒgit_data_dirsé…ç½® â†’ å®Œå…¨ç§»é™¤
5. âœ… Puma DNSè§£æé”™è¯¯ â†’ ä¿®æ”¹hostnameä¸ºlocalhost
6. âœ… Puma TCPç«¯å£å†²çª â†’ ç¦ç”¨TCPï¼Œä»…ä½¿ç”¨Unix socket

**v3.5 æœ€ç»ˆé…ç½®**:
- **å†…å­˜é™åˆ¶**: 3GB â†’ 6GB (å¤§å¹…æå‡æ€§èƒ½)
- **åŠŸèƒ½çŠ¶æ€**: å¯ç”¨ç”¨æˆ·æ³¨å†Œã€é‚®ä»¶åŠŸèƒ½ã€GitLab Pages
- **ç«¯å£é…ç½®**: HTTP(8080), SSH(3333), Registry(5050), Pages(8092)
- **Pumaé…ç½®**: 4è¿›ç¨‹ï¼Œ4-8çº¿ç¨‹ï¼Œçº¯Unix socketé€šä¿¡
- **ç›‘æ§æœåŠ¡**: å¯ç”¨è½»é‡çº§Prometheusç›‘æ§

**å½“å‰çŠ¶æ€**:
- å®¹å™¨ç¨³å®šè¿è¡Œï¼Œä¸å†é¢‘ç¹é‡å¯
- PumaæœåŠ¡ä½¿ç”¨çº¯Unix socketï¼Œé¿å…ç«¯å£å†²çª
- æ‰€æœ‰æ ¸å¿ƒæœåŠ¡æ­£å¸¸è¿è¡Œ
- ç­‰å¾…å®Œæ•´åˆå§‹åŒ–å®Œæˆï¼ˆé¢„è®¡10-15åˆ†é’Ÿï¼‰

**æŠ€æœ¯æ”¹è¿›**:
- PostgreSQL: 512MB shared_buffers, 300è¿æ¥
- Sidekiq: 20å¹¶å‘ä»»åŠ¡å¤„ç†
- Nginx: 4è¿›ç¨‹ï¼Œ2048è¿æ¥ï¼Œæ”¯æŒ500MBä¸Šä¼ 
- ç›‘æ§: Node/PostgreSQL/Redis/GitLabå¯¼å‡ºå™¨å…¨éƒ¨å¯ç”¨  

## ğŸŒ è®¿é—®ä¿¡æ¯

### ä¸»è¦è®¿é—®åœ°å€

**Webç•Œé¢ (v3.5)**:
- HTTP: http://192.168.0.127:8080 â­ ä¸»è¦è®¿é—®åœ°å€
- ç”¨æˆ·æ³¨å†Œ: å·²å¯ç”¨ âœ…
- é‚®ä»¶åŠŸèƒ½: å·²å¯ç”¨ âœ…

**è®¤è¯ä¿¡æ¯**:
- ç”¨æˆ·å: `root`
- å¯†ç : `GitLabFull2024!`
- æ³¨å†Œå¼€æ”¾: æ”¯æŒæ–°ç”¨æˆ·æ³¨å†Œ

### æœåŠ¡è®¿é—®åœ°å€ (v3.5æ›´æ–°)

**Git SSH**:
```bash
# SSHåœ°å€ (ç«¯å£3333)
git@192.168.0.127:3333

# å…‹éš†ç¤ºä¾‹
git clone ssh://git@192.168.0.127:3333/username/project.git

# é…ç½®SSH (å¦‚éœ€è¦)
Host gitlab-v3
    HostName 192.168.0.127
    Port 3333
    User git
```

**Container Registry**:
```bash
# Registryåœ°å€ (ç«¯å£5050)
192.168.0.127:5050

# ç™»å½•Registry
docker login 192.168.0.127:5050

# æ¨é€é•œåƒç¤ºä¾‹
docker tag myimage:latest 192.168.0.127:5050/group/project/myimage:latest
docker push 192.168.0.127:5050/group/project/myimage:latest
```

**GitLab Pages (æ›´æ–°ç«¯å£)**:
```bash
# Pagesåœ°å€ (ç«¯å£8092)
http://192.168.0.127:8092

# Pagesé¡¹ç›®åœ°å€æ ¼å¼
http://username.192.168.0.127:8092/project-name
```

**é‚®ä»¶æœåŠ¡**:
```bash
# é‚®ä»¶é…ç½®å·²å¯ç”¨
å‘é€åœ°å€: gitlab@192.168.0.127
æ˜¾ç¤ºåç§°: GitLab
å›å¤åœ°å€: noreply@192.168.0.127
```

## ğŸ› ï¸ ç®¡ç†æ“ä½œ

### åŸºæœ¬ç®¡ç†å‘½ä»¤

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/gitlab-v3

# ä½¿ç”¨ç®¡ç†è„šæœ¬
./manage.sh status     # æŸ¥çœ‹çŠ¶æ€
./manage.sh logs       # æŸ¥çœ‹æ—¥å¿—
./manage.sh restart    # é‡å¯æœåŠ¡
./manage.sh backup     # åˆ›å»ºå¤‡ä»½
./manage.sh health     # å¥åº·æ£€æŸ¥
./manage.sh info       # æ˜¾ç¤ºè®¿é—®ä¿¡æ¯
```

### Docker ComposeåŸç”Ÿå‘½ä»¤

```bash
# å®¹å™¨ç®¡ç†
docker compose ps              # æŸ¥çœ‹çŠ¶æ€
docker compose logs -f gitlab  # å®æ—¶æ—¥å¿—
docker compose restart gitlab  # é‡å¯æœåŠ¡
docker compose down            # åœæ­¢æœåŠ¡
docker compose up -d           # å¯åŠ¨æœåŠ¡

# å®¹å™¨æ“ä½œ
docker compose exec gitlab bash              # è¿›å…¥å®¹å™¨
docker compose exec gitlab gitlab-ctl status # GitLabæœåŠ¡çŠ¶æ€
```

### é«˜çº§ç®¡ç†æ“ä½œ

```bash
# è¿›å…¥GitLabå®¹å™¨æ‰§è¡Œç®¡ç†å‘½ä»¤
docker compose exec gitlab bash

# åœ¨å®¹å™¨å†…æ‰§è¡ŒGitLabå‘½ä»¤
gitlab-ctl reconfigure         # é‡æ–°é…ç½®
gitlab-ctl restart             # é‡å¯æ‰€æœ‰æœåŠ¡
gitlab-ctl status              # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
gitlab-rake db:migrate         # æ•°æ®åº“è¿ç§»
gitlab-backup create           # åˆ›å»ºå¤‡ä»½
```

## ğŸ“Š ç›‘æ§å’Œæ€§èƒ½

### å†…ç½®ç›‘æ§åŠŸèƒ½

**Prometheusç›‘æ§**:
- ç«¯å£: 9090 (å®¹å™¨å†…éƒ¨)
- æ•°æ®ä¿ç•™: 15å¤©
- è‡ªåŠ¨æ”¶é›†GitLabæŒ‡æ ‡

**ç³»ç»Ÿç›‘æ§æŒ‡æ ‡**:
- Node Exporter: ç³»ç»Ÿèµ„æºç›‘æ§
- PostgreSQL Exporter: æ•°æ®åº“æ€§èƒ½ç›‘æ§  
- Redis Exporter: ç¼“å­˜æ€§èƒ½ç›‘æ§
- GitLab Exporter: åº”ç”¨æ€§èƒ½ç›‘æ§

### æ€§èƒ½åŸºå‡†

**èµ„æºä½¿ç”¨**:
- å†…å­˜é™åˆ¶: 3GB
- CPUé™åˆ¶: 3æ ¸
- å®é™…å†…å­˜ä½¿ç”¨: ~2.5GB (è¿è¡ŒçŠ¶æ€)

**å“åº”æ€§èƒ½**:
- Webç•Œé¢å“åº”: <2ç§’
- Gitæ“ä½œ: å¿«é€Ÿ
- CI/CDæ‰§è¡Œ: è‰¯å¥½
- Registryæ¨æ‹‰: æ­£å¸¸

## ğŸ’¾ å¤‡ä»½å’Œæ¢å¤

### è‡ªåŠ¨å¤‡ä»½é…ç½®

**å¤‡ä»½ç­–ç•¥**:
- ä¿ç•™æ—¶é—´: 7å¤© (604800ç§’)
- å¤‡ä»½è·¯å¾„: `/var/opt/gitlab/backups`
- å¤‡ä»½åŒ…å«: æ•°æ®åº“ã€Gitä»“åº“ã€ä¸Šä¼ æ–‡ä»¶ã€CI/CDæ•°æ®

### æ‰‹åŠ¨å¤‡ä»½æ“ä½œ

```bash
# ä½¿ç”¨ç®¡ç†è„šæœ¬å¤‡ä»½
./manage.sh backup

# æ‰‹åŠ¨åˆ›å»ºå¤‡ä»½
docker compose exec gitlab gitlab-backup create

# å¤‡ä»½é…ç½®æ–‡ä»¶
tar -czf config-backup.tar.gz gitlab-config/ ssl/
```

### æ¢å¤æ“ä½œ

```bash
# æŸ¥çœ‹å¯ç”¨å¤‡ä»½
docker compose exec gitlab ls /var/opt/gitlab/backups/

# æ¢å¤æŒ‡å®šå¤‡ä»½
docker compose exec gitlab gitlab-backup restore BACKUP=å¤‡ä»½æ–‡ä»¶å

# é‡æ–°é…ç½®
docker compose exec gitlab gitlab-ctl reconfigure
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. å®¹å™¨å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**: å®¹å™¨æ— æ³•å¯åŠ¨æˆ–é¢‘ç¹é‡å¯

**æ’æŸ¥æ­¥éª¤**:
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker compose ps

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker compose logs --tail=100 gitlab

# æ£€æŸ¥ç³»ç»Ÿèµ„æº
free -h
df -h
```

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿å¯ç”¨å†…å­˜>3GB
- æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ
- æ¸…ç†Dockerç©ºé—´: `docker system prune`

#### 2. Webç•Œé¢æ— æ³•è®¿é—®

**ç—‡çŠ¶**: æµè§ˆå™¨æ— æ³•æ‰“å¼€GitLabç•Œé¢

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥ç«¯å£ç»‘å®š
ss -tlnp | grep 8080

# å¥åº·æ£€æŸ¥
./manage.sh health

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
```

**è§£å†³æ–¹æ¡ˆ**:
- ç­‰å¾…åˆå§‹åŒ–å®Œæˆ (15-20åˆ†é’Ÿ)
- æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
- ç¡®è®¤å®¹å™¨å¥åº·çŠ¶æ€

#### 3. Container Registryæ— æ³•ä½¿ç”¨

**ç—‡çŠ¶**: Dockerç™»å½•æˆ–æ¨é€å¤±è´¥

**æ’æŸ¥æ­¥éª¤**:
```bash
# æ£€æŸ¥Registryç«¯å£
ss -tlnp | grep 5050

# æµ‹è¯•Registryè®¿é—®
curl http://192.168.0.127:5050/v2/

# æ£€æŸ¥GitLab Registryé…ç½®
docker compose exec gitlab gitlab-rails runner "puts Gitlab.config.registry"
```

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤Registryå·²å¯ç”¨
- æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
- ç¡®è®¤Dockerå®¢æˆ·ç«¯é…ç½®

#### 4. SSLè¯ä¹¦é—®é¢˜

**ç—‡çŠ¶**: HTTPSè®¿é—®æç¤ºè¯ä¹¦é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°ç”Ÿæˆè¯ä¹¦
cd ~/gitlab-v3/ssl
rm -f gitlab.*
openssl genrsa -out gitlab.key 2048
openssl req -new -key gitlab.key -out gitlab.csr -subj '/C=CN/ST=Shanghai/L=Shanghai/O=GitLab/CN=192.168.0.127'
openssl x509 -req -days 365 -in gitlab.csr -signkey gitlab.key -out gitlab.crt

# é‡å¯å®¹å™¨
cd ~/gitlab-v3
docker compose restart
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### å†…å­˜ä¼˜åŒ–
```bash
# å¦‚æœå†…å­˜ä¸è¶³ï¼Œå¯ä»¥è°ƒæ•´é…ç½®
# ç¼–è¾‘docker-compose.ymlï¼Œå‡å°‘å·¥ä½œè¿›ç¨‹æ•°ï¼š
puma['worker_processes'] = 2
nginx['worker_processes'] = 1
sidekiq['max_concurrency'] = 8
```

#### å­˜å‚¨ä¼˜åŒ–
```bash
# å®šæœŸæ¸…ç†
docker compose exec gitlab gitlab-ctl cleanup-packages
docker compose exec gitlab gitlab-rake gitlab:cleanup:repos
docker system prune -f
```

## ğŸ“ ä½¿ç”¨æŒ‡å—

### é¦–æ¬¡é…ç½®æ­¥éª¤

#### 1. ç­‰å¾…åˆå§‹åŒ–å®Œæˆ â³
- æ—¶é—´: 15-20åˆ†é’Ÿ
- éªŒè¯: è®¿é—®Webç•Œé¢æ˜¾ç¤ºç™»å½•é¡µ

#### 2. ä¿®æ”¹é»˜è®¤å¯†ç  ğŸ”’
1. è®¿é—® http://192.168.0.127:8080
2. ä½¿ç”¨ `root` / `GitLabFull2024!` ç™»å½•
3. å¤´åƒ â†’ Settings â†’ Password
4. ä¿®æ”¹ä¸ºå¼ºå¯†ç 

#### 3. é…ç½®SSHå¯†é’¥ ğŸ”‘
```bash
# ç”ŸæˆSSHå¯†é’¥
ssh-keygen -t rsa -b 4096 -C "your.email@example.com"

# æ·»åŠ åˆ°GitLab
# Settings â†’ SSH Keys â†’ ç²˜è´´å…¬é’¥

# æµ‹è¯•è¿æ¥
ssh -T git@192.168.0.127 -p 3333
```

#### 4. é…ç½®Container Registry ğŸ³
```bash
# ç™»å½•Registry
docker login 192.168.0.127:5050

# åœ¨GitLabé¡¹ç›®ä¸­å¯ç”¨Registry
# Project Settings â†’ General â†’ Container Registry
```

### é«˜çº§åŠŸèƒ½ä½¿ç”¨

#### GitLab Pageséƒ¨ç½²
1. åˆ›å»º `.gitlab-ci.yml` æ–‡ä»¶
2. é…ç½®Pageséƒ¨ç½²ä»»åŠ¡
3. æ¨é€ä»£ç è§¦å‘æ„å»º
4. è®¿é—® Pages ç«™ç‚¹

#### CI/CDæµæ°´çº¿é…ç½®
1. åˆ›å»º `.gitlab-ci.yml`
2. å®šä¹‰æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²é˜¶æ®µ
3. é…ç½®Runner (å¦‚éœ€è¦)
4. æ¨é€ä»£ç è§¦å‘æµæ°´çº¿

#### Container Registryä½¿ç”¨
```bash
# æ„å»ºé•œåƒ
docker build -t myapp .

# æ ‡è®°é•œåƒ
docker tag myapp:latest 192.168.0.127:5050/group/project/myapp:latest

# æ¨é€é•œåƒ
docker push 192.168.0.127:5050/group/project/myapp:latest
```

## ğŸ“ˆ å‡çº§å’Œç»´æŠ¤

### ç‰ˆæœ¬å‡çº§

```bash
# å¤‡ä»½æ•°æ®
./manage.sh backup

# æ‹‰å–æ–°é•œåƒ
docker compose pull

# é‡æ–°åˆ›å»ºå®¹å™¨
docker compose up -d --force-recreate

# éªŒè¯å‡çº§
./manage.sh health
```

### å®šæœŸç»´æŠ¤ä»»åŠ¡

**æ¯å‘¨**:
- åˆ›å»ºæ•°æ®å¤‡ä»½
- æ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¤§å°
- æ¸…ç†æ— ç”¨Dockerèµ„æº

**æ¯æœˆ**:
- æ›´æ–°GitLabç‰ˆæœ¬
- æ£€æŸ¥SSLè¯ä¹¦æœ‰æ•ˆæœŸ
- å®¡æŸ¥ç”¨æˆ·æƒé™

**æ¯å­£åº¦**:
- å…¨é¢å®‰å…¨å®¡è®¡
- æ€§èƒ½ä¼˜åŒ–è¯„ä¼°
- ç¾éš¾æ¢å¤æµ‹è¯•

## ğŸ¯ é€‚ç”¨åœºæ™¯

### æ¨èä½¿ç”¨åœºæ™¯

- **ä¸­å°å‹å›¢é˜Ÿ** (5-50äºº)
- **éœ€è¦å®Œæ•´DevOpsåŠŸèƒ½**
- **æœ‰Container Registryéœ€æ±‚**
- **éœ€è¦Pagesé™æ€ç«™ç‚¹æ‰˜ç®¡**
- **é‡è§†ä»£ç è´¨é‡ç®¡ç†**

### ä¸æ¨èåœºæ™¯

- **å¤§å‹ä¼ä¸š** (å»ºè®®ä¸“ä¸šç‰ˆ)
- **å†…å­˜ä¸¥é‡ä¸è¶³** (<4GBå¯ç”¨)
- **åªéœ€è¦GitåŠŸèƒ½** (å¯ç”¨v2)
- **ç½‘ç»œå¸¦å®½å—é™**

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å®Œæˆ âœ…
- [x] å®¹å™¨æˆåŠŸå¯åŠ¨
- [x] æ‰€æœ‰ç«¯å£æ­£ç¡®æ˜ å°„ (8080, 3333, 5050, 8443)
- [x] SSLè¯ä¹¦åˆ›å»ºæˆåŠŸ
- [x] æ•°æ®ç›®å½•å¤–æŒ‚é…ç½®
- [x] èµ„æºé™åˆ¶è®¾ç½® (3GBå†…å­˜)
- [x] ç®¡ç†è„šæœ¬åˆ›å»º
- [x] å¤‡ä»½ç›®å½•å‡†å¤‡

### åŠŸèƒ½éªŒè¯ ğŸ“‹
- [ ] Webç•Œé¢æ­£å¸¸è®¿é—®
- [ ] SSH Gitè¿æ¥æˆåŠŸ
- [ ] Container Registryå¯ç”¨
- [ ] å¤‡ä»½åŠŸèƒ½æ­£å¸¸
- [ ] SSLè¯ä¹¦æœ‰æ•ˆ
- [ ] ç›‘æ§æŒ‡æ ‡æ”¶é›†

### ç”¨æˆ·é…ç½® ğŸ‘¤
- [ ] ä¿®æ”¹é»˜è®¤å¯†ç 
- [ ] æ·»åŠ SSHå¯†é’¥
- [ ] åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®
- [ ] é…ç½®Registryæƒé™
- [ ] æµ‹è¯•CI/CDåŠŸèƒ½

## ğŸ‰ éƒ¨ç½²æ€»ç»“

**ğŸš€ GitLab v3 å·²æˆåŠŸéƒ¨ç½²ï¼**

**æ ¸å¿ƒä¼˜åŠ¿**:
- âœ… **åŠŸèƒ½å®Œæ•´**: åŒ…å«ä¼ä¸šçº§DevOpså…¨åŠŸèƒ½
- âœ… **æ€§èƒ½ä¼˜åŒ–**: 3GBå†…å­˜æ”¯æŒä¸­å‹å›¢é˜Ÿ
- âœ… **æ˜“äºç®¡ç†**: ä¸°å¯Œçš„ç®¡ç†è„šæœ¬å’Œå·¥å…·
- âœ… **æ‰©å±•æ€§å¥½**: æ”¯æŒç‹¬ç«‹Redis/PostgreSQL
- âœ… **ç›‘æ§å®Œå–„**: å†…ç½®Prometheusç›‘æ§ä½“ç³»

**è®¿é—®åœ°å€**:
- ğŸŒ **ä¸»ç•Œé¢**: http://192.168.0.127:8080
- ğŸ” **é»˜è®¤è´¦æˆ·**: root / GitLabFull2024!
- ğŸ³ **Registry**: http://192.168.0.127:5050
- ğŸ”— **SSH**: git@192.168.0.127:3333

**ä¸‹ä¸€æ­¥**:
1. ç­‰å¾…åˆå§‹åŒ–å®Œæˆ (15-20åˆ†é’Ÿ)
2. è®¿é—®Webç•Œé¢è¿›è¡Œé¦–æ¬¡é…ç½®
3. å¼€å§‹äº«å—å®Œæ•´çš„GitLabä½“éªŒï¼

---

**ğŸ“„ æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ğŸ•’ æœ€åæ›´æ–°**: 2025-08-20 18:40  
**ğŸ¯ é€‚ç”¨ç‰ˆæœ¬**: GitLab CE Latest (v3é…ç½®)  
**ğŸ‘¥ ç›®æ ‡ç”¨æˆ·**: 5-50äººå›¢é˜Ÿ